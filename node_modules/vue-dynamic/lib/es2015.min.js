import e from"vue";const{toString:t}=Object.prototype,n=e=>"function"==typeof e,o=e=>"[object Object]"===t.call(e),{warn:i}=e.util,r=e=>i(`invalid ${e} will be ignored!`),a=e=>i(`no ${e} found thus it will be ignored!`),s=(e,t,i)=>{const a=e[i];if(o(a)){const e={};for(const[t,o]of Object.entries(a||{}))e[t]=n(o)?o:Function[Array.isArray(o)?"apply":"call"](null,o);t[i]=e}else if(a)return r(i);return!0},c=(e,t=!1)=>{if(!e)return;if(o(e))e=(e=>{const t=[];for(const[n,i]of Object.entries(e))o(i)&&t.push(Object.assign(i,{name:n}));return t})(e);else if(!Array.isArray(e))return r("components");if(0===e.length)return a("components");let i="";const l={};let m=0;return e.forEach((e,o)=>{const{name:r=`Dynamic__${o}`,template:p,data:d,components:u}=e;if(!p)return a("template");i+=`<${r}${t?"":' v-on="$parent.$listeners"'} />`;const f=l[r]={template:p};s(e,f,"filters")&&s(e,f,"methods")&&(d&&(f.data=n(d)?d:()=>Object.assign({},d)),u&&(f.components=c(u,!0)),m++)}),m?t?l:{name:"Dynamic__Root",template:1===m?i:`<div>${i}</div>`,components:l}:void 0},l={name:"vue-dynamic",template:'<component :is="view" />',props:{comps:{validator:e=>!e||Array.isArray(e)||o(e)},emptyView:{required:!0,validator:e=>o(e)}},data(){return{view:this.emptyView}},watch:{comps:{immediate:!0,handler:"build"}},methods:{build(){this.view=c(this.comps)||this.emptyView}}},m=(e,t)=>{var n;return e.component((null===(n=t)||void 0===n?void 0:n.name)||"Dynamic",l)};"undefined"!=typeof window&&window.Vue&&window.Vue.use(m);const p=m;export default m;export{l as Dynamic,m as VueDynamic,p as install};
